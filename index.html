
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Voice Chat</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 50px;
      background-color: #f5f5f5;
    }

    h1 {
      color: #333;
    }

    #start-btn {
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      border: none;
      background-color: #4caf50;
      color: white;
      border-radius: 5px;
      margin-top: 20px;
    }

    #start-btn:hover {
      background-color: #45a049;
    }
    #chat {
  margin-top: 20px;
  max-width: 600px;
  height: 400px; /* Fixed height for scrolling */
  overflow-y: auto; /* Enables scrolling */
  margin-left: auto;
  margin-right: auto;
  text-align: left;
  background-color: white;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  position: relative;
  transition: position 0.3s ease;
}

#chat.fixed {
  position: fixed;
  top: 50px;
  right: 0;
  left: 0;
  margin: auto;
}


    

    .message {
      margin: 10px;
      padding: 10px;
      border-radius: 5px;
    }

    .user {
      background-color: #d1e7dd;
      text-align: right;
    }

    .bot {
      background-color: #f8d7da;
      text-align: left;
    }

    /* Glowing Sphere */
    .listening-indicator {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: radial-gradient(circle, #4caf50 40%, #388e3c);
      margin: 20px auto;
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.8);
      transition: all 0.3s ease;
    }

    /* Active listening animation */
    .listening {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.7);
      }
      50% {
        transform: scale(1.1);
        box-shadow: 0 0 40px rgba(0, 255, 0, 1);
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(0, 255, 0, 0.7);
      }
    }
  </style>
</head>
<body>
  <h1>JARVIS</h1>
  <div class="listening-indicator" id="indicator"></div>
  <button id="start-btn">TAP TO TALK</button>
  <div id="chat"></div>

  <script>
    

    // Initialize SpeechRecognition
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.interimResults = false;
    recognition.continuous=true;

    const indicator = document.getElementById("indicator");
    const startBtn = document.getElementById("start-btn");
    const chat = document.getElementById("chat");

    // OpenAI API Key (replace with your key)
    const OPENAI_API_KEY = '6baa45d8c8msha899d5d06fe13b4p14696ajsn8b9fd7ef4ff6';
    // Start Listening on Button Click
    startBtn.addEventListener("click", () => {
      indicator.classList.add("listening");
      recognition.start();
      console.log("Listening...");
    });

    // Process User's Voice Input
    recognition.onresult = function (event) {
      const transcript = event.results[0][0].transcript;
      console.log("User said:", transcript);
      addMessage(transcript, "user");
        sendToOpenAI(transcript);
      
    };

    // Stop Listening
    recognition.onend = function () {
      indicator.classList.remove("listening");
    };

    // Add messages to the chat window
    function addMessage(text, sender) {
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message", sender);
      messageDiv.innerText = text;
      chat.appendChild(messageDiv);
    }

    // Send user input to OpenAI API
    async function sendToOpenAI(prompt) {
  try {
    const response = await fetch(
      'https://cheapest-gpt-4-turbo-gpt-4-vision-chatgpt-openai-ai-api.p.rapidapi.com/v1/chat/completions',
      {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-RapidAPI-Key": OPENAI_API_KEY,
          "X-RapidAPI-Host": "cheapest-gpt-4-turbo-gpt-4-vision-chatgpt-openai-ai-api.p.rapidapi.com",
        },
        body: JSON.stringify({
  model: "gpt-4o",  // Updated model
  messages: [{ role: "user", content: prompt }],
  max_tokens: 150
}),
        }
        );
        
    const data = await response.json();

    if (response.ok) {
      const responseText = data.choices[0].message.content.trim();
      console.log("Bot says:", responseText);
      addMessage(responseText, "bot");
      speak(responseText);
    } else {
      console.error("API Error:", data);
    }
  } catch (error) {
    console.error("Error with OpenAI API:", error);
  }
}


 
  </script>
</body>
</html>
